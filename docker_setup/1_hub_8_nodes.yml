services:
  hub:
    image: minidb_1.0
    container_name: hub
    networks: 
      - default
    environment:
      RPC_CONNECTIONS: "node1:8081 node2:8082 node3:8083 node4:8084 node5:8085 node6:8086 node7:8087 node8:8088"
      TCP_CONNECTIONS: "8108 8109 8110 8111 8112 8113 8114 8115"
    command: "tail -f /dev/null"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  node1:
    image: minidb_1.0
    container_name: node1
    networks: 
      - default
    environment:
        RPC_PORT: "8081"
        TCP_PORT: "8108"
        HUB_ADDRESS: "hub"
    command: "node"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  node2:
    image: minidb_1.0
    container_name: node2
    networks: 
      - default
    environment:
        RPC_PORT: "8082"
        TCP_PORT: "8109"
        HUB_ADDRESS: "hub"
    command: "node"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  node3:
    image: minidb_1.0
    container_name: node3
    networks: 
      - default
    environment:
        RPC_PORT: "8083"
        TCP_PORT: "8110"
        HUB_ADDRESS: "hub"
    command: "node"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  node4:
    image: minidb_1.0
    container_name: node4
    networks: 
      - default
    environment:
        RPC_PORT: "8084"
        TCP_PORT: "8111"
        HUB_ADDRESS: "hub"
    command: "node"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  node5:
    image: minidb_1.0
    container_name: node5
    networks: 
      - default
    environment:
        RPC_PORT: "8085"
        TCP_PORT: "8112"
        HUB_ADDRESS: "hub"
    command: "node"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  node6:
    image: minidb_1.0
    container_name: node6
    networks: 
      - default
    environment:
        RPC_PORT: "8086"
        TCP_PORT: "8113"
        HUB_ADDRESS: "hub"
    command: "node"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  node7:
    image: minidb_1.0
    container_name: node7
    networks: 
      - default
    environment:
        RPC_PORT: "8087"
        TCP_PORT: "8114"
        HUB_ADDRESS: "hub"
    command: "node"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  node8:
    image: minidb_1.0
    container_name: node8
    networks: 
      - default
    environment:
        RPC_PORT: "8088"
        TCP_PORT: "8115"
        HUB_ADDRESS: "hub"
    command: "node"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

